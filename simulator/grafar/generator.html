<html>
<head>
<script type="text/javascript" src="ASCIIsvg.js"></script>
<title>Robomatik</title>
</head>
<body>

<script>//initialize the variables
kontrola = "";

function data(vzorec) {
  //alert(s);

  vzorecKontrola = vzorec;
  vzorecKontrola = mathjs(vzorecKontrola);
  vzorecKontrola = vzorecKontrola.replace(/sqrt\((.*)\)/g,"pow($1,0.5)");
  vzorecKontrola = vzorecKontrola.replace(/E/g,"Math.E");
  vzorecKontrola = vzorecKontrola.replace(/pi/g,"Math.PI");
  vzorecKontrola = vzorecKontrola.replace(/sin/g,"Math.sin");
  vzorecKontrola = vzorecKontrola.replace(/cos/g,"Math.cos");
  vzorecKontrola = vzorecKontrola.replace(/abs/g,"Math.abs");
  vzorecKontrola = vzorecKontrola.replace(/log/g,"Math.log");
  vzorecKontrola = vzorecKontrola.replace(/pow/g,"Math.pow");

  kontrola = "";
  kontrola = "new Array(";
  pesek = "";
  minX = parseFloat(document.getElementById('minX').value);
  maxX = parseFloat(document.getElementById('maxX').value);
  stepX = parseFloat(document.getElementById('stepX').value);
  for (x=minX;x<=maxX;x+=stepX)
  {
      //abs(sin(4x)*x/3)
    //document.write(x+"," + (m*x+b)+",");
    //document.write("<br />");
                                                                        
    kontrola += pesek+(Math.round(x*10)/10)+"," + ((Math.round(     (  eval(vzorecKontrola) )      *10  ))/10);
    pesek = ",";
  }
  kontrola+=");\n#Napoveda\n#";
  document.getElementById('kontrola').value=kontrola;
}
  
function ukaz_zadani(t){
  document.getElementById('picture1input').value = "";
  document.getElementById('picture1input').value = "setBorder(0);  initPicture(-6,6);  axes(1, 1, \"labels\", \"grid\");  strokewidth = \"1.5\";  stroke = \"blue\";  plot(\""+t+"\"); stroke = \"red\"; ";
  document.getElementById('kontrola').value += "setBorder(0);  initPicture(-6,6);  axes(1, 1, \"labels\", \"grid\");  strokewidth = \"1.5\";  stroke = \"blue\";  plot(\""+t+"\"); stroke = \"red\"; ";  
}

</script>

<center>
<h1>Grafaø generátor</h1>
<div id="outputNode">
  <embed width="500" height="350" src="d.svg" onmousemove="update()" script=''>
</div>
<!--Pointer coordinates: (<span id="getx">x</span>,<span id="gety">y</span>)-->

<br />
<!--<input type="button" value="Vykresli" onclick=" data(document.getElementById('vstup').value); updatePicture(0); eval('stroke = \'red\'; plot(\''+document.getElementById('vstup').value+'\');');  " />-->
<span style="font-size:20px;" >Y=</span><input size=40 type="text" id="vstup" value="x" style="font-size:20px; " onKeyPress="if (event.keyCode==13){ data(document.getElementById('vstup').value); ukaz_zadani(document.getElementById('vstup').value);  updatePicture(0); }" />
<!--<input type="button" value="Obnov" onclick="updatePicture(0)"/>-->

<!--<input type="button" value="Obnov" onclick="eval(document.getElementById('picture1input').value)" />-->

<script>
function update() {
  setText(getX().toFixed(2),"getx")
  setText(getY().toFixed(2),"gety")
}
</script>

<br />
Kontroly meze: 
MinX<input size=2 type="text" id="minX" value="-5" />
MaxX<input size=2 type="text" id="maxX" value="5" />
StepX<input size=2 type="text" id="stepX" value="0.2" />

<br /><br />Zdrojak<br />

<textarea id = "kontrola"  cols = 80 rows=12>
</textarea><br />
<textarea style="display:none;" id="picture1input" rows="1" cols="54">
</textarea>

<script>
  data("x");
  ukaz_zadani("x");   
  updatePicture(0);

</script>

</center>

</body>
</html>
